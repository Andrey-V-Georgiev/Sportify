<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <th:block th:include="~{fragments/head}"></th:block>

    <title>Calendar</title>
</head>

<body>
<header>
    <th:block th:include="~{fragments/navbar}"></th:block>
</header>
<main class="d-flex justify-content-center">

    <div id="jumbotron" class="jumbotron col-8 pt-3 shadow-lg bg-white d-flex justify-content-center">

        <div id="calendar" class="w-75">
            <div class="row">
                <h3>Fitness-center "Pulse" bul. Bulgaria</h3>
            </div>
            <hr>
            <div id="menu" class="row my-4">
                <div class="btn-group" role="group" aria-label="Basic example">
                    <div id="now" class="btn btn-success border border-dark">Now</div>
                    <select id="selectMonth" class="btn border border-dark">
                        <option value="1" class="dropdown-item" href="#">January</option>
                        <option value="2" class="dropdown-item" href="#">February</option>
                        <option value="3" class="dropdown-item" href="#">March</option>
                        <option value="4" class="dropdown-item" href="#">April</option>
                        <option value="5" class="dropdown-item" href="#">May</option>
                        <option value="6" class="dropdown-item" href="#">June</option>
                        <option value="7" class="dropdown-item" href="#">July</option>
                        <option value="8" class="dropdown-item" href="#">August</option>
                        <option value="9" class="dropdown-item" href="#">September</option>
                        <option value="10" class="dropdown-item" href="#">October</option>
                        <option value="11" class="dropdown-item" href="#">November</option>
                        <option value="12" class="dropdown-item" href="#">December</option>
                    </select>
                    <select id="selectYear" class="btn border border-dark">
                        <option value="2019" class="dropdown-item" href="#">2019</option>
                        <option value="2020" class="dropdown-item" href="#">2020</option>
                    </select>
                    <div id="find-month" class="btn btn-success border border-dark">Find</div>
                </div>

            </div>

            <div class="row mb-1">
                <div class="border border-right-0 border-dark rounded-left ml-1" style="width: 132px;height: 35px">
                    <h5 class="text-center">Sun</h5>
                </div>
                <div class="border-top border-bottom border-dark" style="width: 132px;height: 35px">
                    <h5 class="text-center">Mon</h5>
                </div>
                <div class="border-top border-bottom border-dark" style="width: 132px;height: 35px">
                    <h5 class="text-center">Tue</h5>
                </div>
                <div class="border-top border-bottom border-dark" style="width: 132px;height:35px">
                    <h5 class="text-center">Wed</h5>
                </div>
                <div class="border-top border-bottom border-dark" style="width: 132px;height: 35px">
                    <h5 class="text-center">Thu</h5>
                </div>
                <div class="border-top border-bottom border-dark" style="width: 132px;height: 35px">
                    <h5 class="text-center">Fri</h5>
                </div>
                <div class="border border-left-0 border-dark rounded-right" style="width: 132px;height: 35px">
                    <h5 class="text-center">Sat</h5>
                </div>
            </div>

        </div>
    </div>
</main>
<script th:inline="javascript">

    $(document).ready(function () {
        buildTable(currentMonth, createScheduleModal, showScheduleModal);
    });

    $("#now").on("click", (e) => {
        e.preventDefault();
        buildTable(currentMonth, createScheduleModal, showScheduleModal);
    });

    $("#find-month").on("click", (e) => {
        e.preventDefault();
        let monthVal = $('#selectMonth option:selected').val();
        let yearVal = $('#selectYear option:selected').val();
        let month = findMonth(monthVal, yearVal);
        buildTable(month, createScheduleModal, showScheduleModal);
    });

let sportCenterID = [[${sportCenterID}]];

let createScheduleModal = () => {
        return `<div class='m-1 rounded rounded-sm border border-dark' style='width: 125px;height: 80px'>

<div id="mybtn" data-toggle="modal" data-target="#aaa">
  <div class='bg-white rounded rounded-sm' style='width: 123px;height: 78px'>
<h3 class="text-dark">
${dayOfMonth}
</h3>
</div>
</div>

<div class="modal fade" id="aaa" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered w-25" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body justify-content-center">
                <h5 class="text-center">
                    There is no schedule for this day!
                </h5>
            </div>
            <div class="modal-footer justify-content-center">
                <form action="/sport-centers/create-schedule/${sportCenterID}/${dayOfMonth}/${yearOfMonth}"
                      method="get" id="create-schedule-form" class="w-100">
                    <button type="submit" class="btn btn-block btn-warning">Create schedule</button>
                </form>
            </div>
        </div>
    </div>
</div>
</div>`
    }

let showScheduleModal = () => {
        return `<div class='m-1 rounded rounded-sm border' style='width: 125px;height: 80px'>

<div id="mybtn" data-toggle="modal" data-target="#aaa">
  <div class='bg-success rounded rounded-sm' style='width: 123px;height: 78px'>
<h3 class="text-white">
${dayOfMonth}
</h3>
</div>
</div>

<div class="modal fade" id="aaa" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered w-25" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body justify-content-center">
                <h3 class="text-center">

                </h3>
            </div>
            <div class="modal-footer justify-content-center">
                  <form action="/sport-centers/create-schedule/${sportCenterID}" method="get"
                        id="create-schedule-form" class="w-100">
                    <button type="submit" class="btn btn-block btn-warning">Edit schedule</button>
                  </form>
                     <form action="/sport-centers/create-schedule/${sportCenterID}" method="get"
                        id="create-schedule-form" class="w-100">
                    <button type="submit" class="btn btn-block btn-success">Show schedule</button>
                  </form>
            </div>
        </div>
    </div>
</div>
</div>`
    }

    $('#exampleModalCenter').on('shown.bs.modal', function () {
        $('#myInput').trigger('focus')
    })
</script>
</body>
</html>

